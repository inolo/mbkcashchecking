{% extends "layout.html" %}
{% block css %}
 .customer-details, .orders-section {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-bottom: 20px;
        }

        .customer-details h2, .orders-section h3 {
            color: #007bff;
            margin-bottom: 15px;
        }

        .customer-details p, .orders-section p {
            line-height: 1.6;
            color: #333333;
        }

        .custom-table th {
            background-color: #007bff;
            color: white;
        }

        .custom-table td, .custom-table th {
            text-align: left;
            padding: 8px;
        }

        .custom-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        .custom-table {
            width: 100%;
            border-collapse: collapse;
        }
            .customer-details-row {
            display: flex;
            align-items: start;
            gap: 20px;
            margin-bottom: 20px;
        }



        .customer-details, .customer-image, .customer-license {
            flex: 1;
            }
            .customer-image img, .customer-license img {
        width: 640px; /* Set the width to 640px */
        height: 480px; /* Set the height to 480px */
        object-fit: cover; /* This will ensure the aspect ratio is maintained */
        border-radius: 8px;
    }
    .customer-profile {
    display: flex;
    flex-direction: column;
    align-items: center; /* Center the items vertically */
    gap: 20px; /* Space between images and details */
}

.customer-images {
    display: flex;
    flex-direction: row;
    gap: 20px; /* Space between the two images */
}

.customer-image img, .customer-license img {
    width: 640px; /* Set the width to 640px */
    height: 480px; /* Set the height to 480px */
    object-fit: cover; /* This will ensure the aspect ratio is maintained */
    border-radius: 8px;
}

.customer-details {
    width: 100%; /* Adjust the width as needed */
    /* Additional styling for customer details */
}


{% endblock %}

//////////////////////////////////////////////////////////////////////////


{% block main %}
<div class="main-content" id="mainContent">

       <div class="customer-profile">
        <!-- Container for Images -->


        <!-- Customer Details -->
        <div class="customer-details">
            <!-- ... [customer details] ... -->
                                    <h2>Company Details</h2>
        <div class="customer-details">
            <p id="cust_id"><strong>ID:</strong> {{ company.company_id }}</p>
            <p><strong>Company Name:</strong> {{ company.name }}</p>
            <p><strong>Address:</strong> {{ company.address }}</p>
            <p><strong>Phone Number:</strong> {{ company.phone_number }}</p>
            <p><strong>Creation Date:</strong> {{ company.creation_date }}</p>
            <!-- Add more details as needed -->
<!--            <div class="customer-notes">-->
<!--            <h3>Notes</h3>-->
<!--            <textarea id="customerNotes" rows="4" style="width: 100%;">{{ customer.notes }}</textarea>-->
<!--            <button id="saveNotes" type="button" class="btn btn-primary">Save Notes</button>-->
<!--        </div>-->
<!--        </div>-->
<!--            <button id="flagaccount" type="button">Flag Account</button>-->
<!--            <button id="unflagaccount" type="button">Unflag Account</button>-->
<!--        </div>-->
    </div>

        <h3>Customers</h3>
        <table class="custom-table">
            <thead>
                <tr>
                    <th>Customer ID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Phone Number</th>
                    <th>Address</th>
                    <th>License Number</th>
                    <th>Date Last Checked</th>
                    <th>Is Flagged</th>
                </tr>
            </thead>
            <tbody>
                {% for item in customer %}
                    <tr>
                        <td><a href="/customer/{{ item[0]}}" class="clickable">{{ item[0]}}</a></td>
                        <td>{{ item[1]}}</td>
                        <td>{{ item[2]}}</td>
                        <td>{{ item[3]}}</td>
                        <td>{{ item[4]}}</td>
                        <td>{{ item[5]}}</td>
                        <td>{{ item[7]}}</td>
                        <td>{{ item[8]}}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <h3>Orders</h3>
        <table class="custom-table">
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>Customer ID</th>
                    <th>Order Create Date</th>
                    <th>Date Check Issued</th>
                    <th>Company</th>
                    <th>Amount</th>
                    <th>Amount Issued</th>
                    <th>Company ID</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order %}
                    <tr>
                        <td><a href="/order/{{ item[0]}}" class="clickable">{{ item[0]}}</a></td>
                        <td><a href="/customer/{{ item[1]}}" class="clickable">{{ item[1]}}</a></td>
                        <td>{{ item[2]}}</td>
                        <td>{{ item[3]}}</td>
                        <td>{{ item[4]}}</td>
                        <td>{{ item[7]}}</td>
                        <td>{{ item[9]}}</td>
                        <td>{{ item[10]}}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}

///////////////////////////////////////////////////////////////////////////

{% block js %}
 let saveNotes = document.getElementById('saveNotes');

        saveNotes.addEventListener('click', function () {
            var notes = document.getElementById('customerNotes').value;
            var customerId = document.getElementById('cust_id').innerText;
        fetch('/save_notes', {
                method: 'POST',
                 body: JSON.stringify({ customerId: customerId, notes: notes }),
            })
            .then(response => {
                if (response.ok) {
                    console.log('Image uploaded successfully.');
                    window.location.reload();
                } else {
                    console.error('Image upload failed.');
                }


        });
     });
        let flagaccount = document.getElementById('flagaccount');

        flagaccount.addEventListener('click', function () {
        console.log('I am here');
         var pValue = document.getElementById('cust_id').innerText;
         console.log(pValue);
        fetch('/flag_account', {
                method: 'POST',
                body: JSON.stringify({ pTagValue: pValue }),
            })
            .then(response => {
                if (response.ok) {
                    console.log('Image uploaded successfully.');
                    window.location.reload();
                } else {
                    console.error('Image upload failed.');
                }


        });
     });

      let unflagaccount = document.getElementById('unflagaccount');

        unflagaccount.addEventListener('click', function () {
         var pValue = document.getElementById('cust_id').innerText;
         console.log(pValue);
        fetch('/unflag_account', {
                method: 'POST',
                body: JSON.stringify({ pTagValue: pValue }),
            })
            .then(response => {
                if (response.ok) {
                    console.log('Image uploaded successfully.');
                    window.location.reload();
                } else {
                    console.error('Image upload failed.');
                }


        });
     });
{% endblock %}
